# CloudFlare Worker 配置 - Wrangler 使用指南\n\n## 简介\n\nWrangler 是 CloudFlare Worker 的官方工具，用于本地开发和部署 Worker 项目。通过 `wrangler.toml` 配置文件，您可以自定义 Worker 的开发和部署设置。\n\n## 安装 Wrangler\n\n首先，您需要安装 Wrangler。您可以从 CloudFlare 的 GitHub 仓库下载并安装 Wrangler：\n\n```bash\nnpm install -g @cloudflare/wrangler\n```\n\n## 配置 `wrangler.toml`\n\n`wrangler.toml` 文件用于配置 Worker 的各种设置，包括名称、入口点、路由、环境变量等。\n\n### 示例配置\n\n以下是一个 `wrangler.toml` 的示例配置：\n\n```toml\nname = \my-worker\\nmain = \src/index.js\\nroute = {\n pattern = \example.org/*\,\n zone_name = \example.org\\n}\n```\n\n### 环境配置\n\n您可以为不同的环境（如开发、测试、生产）配置不同的设置。使用 `[env.name]` 来定义环境特定的配置：\n\n```toml\n[env.staging]\nname = \my-worker-staging\\nroute = {\n pattern = \staging.example.org/*\,\n zone_name = \example.org\\n}\n```\n\n### 顶级键\n\n以下是一些在顶级配置中可用的键：\n\n- `name`: Worker 的名称。\n- `main`: Worker 的入口点文件路径。\n- `route`: Worker 应部署到的路由。\n- `vars`: 环境变量。\n- `kv_namespaces`: KV 命名空间绑定。\n\n### 可继承的键\n\n以下是一些可继承的键：\n\n- `name`: Worker 的名称。\n- `main`: Worker 的入口点文件路径。\n- `compatibility_date`: 兼容性日期。\n- `account_id`: 账户 ID。\n- `workers_dev`: 是否使用 `.workers.dev` 子域。\n\n### 不可继承的键\n\n以下是一些不可继承的键：\n\n- `define`: 部署时替换的值的映射。\n- `vars`: 环境变量。\n- `durable_objects`: Durable Object 绑定。\n- `kv_namespaces`: KV 命名空间绑定。\n\n## 路线类型\n\nCloudFlare Worker 支持三种路由类型：\n\n- **自定义域**: 将 Worker 连接到自定义域或子域。\n- **路由**: 将 URL 模式映射到 Worker。\n- **`workers.dev`**: 使用 `.workers.dev` 子域进行测试和部署。\n\n## 触发器\n\n您可以使用触发器来定义表达式，以调用 Worker 的函数。例如，使用 cron 表达式来设置定时任务：\n\n```toml\n[triggers]\ncrons = [\* * * * *\]\n```\n\n## 自定义版本\n\n您可以使用自定义构建步骤来配置 Worker 的构建过程。\n\n```toml\n[build]\ncommand = \npm run build\\n```\n\n## 绑定\n\nWrangler 支持多种绑定，包括：\n\n- **浏览器渲染**: 与无头浏览器实例交互。\n- **D1 数据库**: 与 Cloudflare 的无服务器 SQL 数据库交互。\n- **调度命名空间绑定**: 与 Workers for Platforms 通信。\n- **耐用对象**: 与 Durable Objects 交互。\n- **电子邮件绑定**: 将电子邮件发送到指定的地址。\n- **环境变量**: 设置环境变量。\n- **Hyperdrive**: 与 Postgres 数据库交互。\n- **KV 命名空间**: 与 Workers KV 交互。\n- **可观察性**: 配置可观察性设置。\n- **队列**: 与 Cloudflare Queues 交互。\n- **R2 存储桶**: 与 Cloudflare R2 Storage 交互。\n- **Vectorize 索引**: 与 Vectorize 索引交互。\n- **服务绑定**: 与其他 Worker 交互。\n- **静态资产**: 配置静态资产。\n- **Analytics Engine 数据集**: 与 Workers Analytics Engine 交互。\n- **mTLS 证书**: 与 mTLS 证书交互。\n- **Workers AI**: 与 Workers AI 交互。\n\n## 部署 Worker\n\n使用 Wrangler 部署 Worker：\n\n```bash\nwrangler deploy\n```\n\n## 总结\n\n通过 Wrangler 和 `wrangler.toml` 配置文件，您可以轻松地配置和部署 CloudFlare Worker。遵循上述指南，您可以自定义 Worker 的开发和部署设置，并利用 CloudFlare 提供的各种功能。

